(self.webpackChunkiot_notebook=self.webpackChunkiot_notebook||[]).push([[618],{7618:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>H,iotIcon:()=>B,iotaeIcon:()=>z});var s=n(8611),i=n(9373),o=n(2621),a=n(6271),r=n.n(a),l=n(138),d=n(9850),c=n(3290);const h=["Application & Cloud Services","Devices","Gateway","Undefined"],u=["app-and-cloud","device","gateway","undefined"];class m extends l.ReactWidget{constructor(e,t){super(),this.id="iotsidebar",this.title.icon=B,this.title.caption="IoT Architecture",this.title.closable=!0,this.addClass("jp-iotsidebar"),this._app=e,this._model=t}render(){return r().createElement(p,{app:this._app,model:this._model})}get model(){return this._model}}class p extends r().Component{constructor(e){super(e),this.contents=new c.ContentsManager,this.elements={},this.state={lista:{}},this.elements={},(0,d.toArray)(u).map((e=>this.elements[e]=[]));const{services:t}=e.model.manager;t.contents.fileChanged.connect(this._onFileChanged,this)}initElements(){this.elements={},(0,d.toArray)(u).map((e=>this.elements[e]=[]))}_onFileChanged(e,t){this.initElements(),(0,d.toArray)(this.props.model.items()).forEach((e=>{"notebook"===e.type&&this.contents.get(e.name).then((t=>{this.elements[t.content.metadata.architectural_element].push(e),this.setState({lista:this.elements})}))}))}componentDidMount(){(0,d.toArray)(this.props.model.items()).forEach((e=>{"notebook"===e.type&&this.contents.get(e.name).then((t=>{this.elements[t.content.metadata.architectural_element].push(e),this.setState({lista:this.elements})}))}))}render(){return r().createElement(r().Fragment,null,r().createElement("div",{className:"jp-iotsidebar-header"},r().createElement(l.ToolbarButtonComponent,null)),(0,d.toArray)(h).map(((e,t)=>r().createElement(g,{key:u[t],name:e,items:this.elements[u[t]],app:this.props.app}))))}}function g(e){return r().createElement("div",{className:"jp-iotsidebar-section"},r().createElement(r().Fragment,null,r().createElement("header",{className:"jp-iotsidebar-sectionHeader"},r().createElement("h2",null,e.name)),r().createElement("div",{className:"jp-iotsidebar-sectionContainer"},r().createElement(v,{items:e.items,app:e.app}))))}function v(e){return r().createElement(k,{items:e.items,app:e.app})}function k(e){return r().createElement("ul",{className:"jp-iotsidebar-sectionList"},e.items.map(((t,n)=>r().createElement(b,{key:n,item:t,app:e.app}))))}function b(e){const t=e.item.path;return r().createElement("li",{className:"jp-iotsidebar-item"},r().createElement("span",{className:"jp-iotsidebar-itemLabel",title:e.item.name,onClick:()=>{e.app.commands.execute("docmanager:open",{path:t})}},e.item.name))}var w=n(5950),f=n(2853),C=n(6168),_=n(608),x=n(1503);const y="is_prerequisite",E="is_linked_previous_cell";class I extends l.ReactWidget{constructor(e){super(),this.addClass("jp-CellFooter"),this.commands=e,this.isPrerequisite=!1,this.isLinked=!1,this.isBoardConnected=!1,this.isSetup=!1,this.isLoop=!1,this.kernel="",this.fqbn}_notifyBoardConnection(e,t){t.startsWith("kernel")&&this.kernel!=t?(this.kernel=t.split("kernel")[1],this.update()):t.startsWith("kernel")||(this.isBoardConnected=!0,this.fqbn=t,this.update())}_notifyKernelChange(e,t){this.kernel=t}changeIsPrerequisite(e){this.isPrerequisite=e,this.update()}changeIsLinked(e){this.isLinked=e,this.update()}render(){return a.createElement("div",{className:"iotcell-cellFooterContainer"},a.createElement("input",{hidden:!0,type:"radio",id:"rd:setup"+this.id,name:this.id,checked:this.isSetup,onChange:e=>{this.changeIsPrerequisite(!this.isSetup),this.commands.execute("set-as-prerequisite",{state:this.isSetup})}}),a.createElement("label",{hidden:!0,htmlFor:"rd:setup"+this.id},"Setup"),a.createElement("span",null),a.createElement("input",{hidden:!0,type:"radio",id:"rd:loop"+this.id,name:this.id,checked:this.isLoop,onChange:e=>{this.changeIsLinked(!this.isLoop),this.commands.execute("set-as-linked",{state:this.isLoop})}}),a.createElement("label",{hidden:!0,htmlFor:"rd:loop"+this.id},"Loop"),a.createElement("input",{hidden:!1,type:"checkbox",id:"cb:prerequisite"+this.id,name:this.id,checked:this.isPrerequisite,onChange:e=>{this.changeIsPrerequisite(!this.isPrerequisite),this.commands.execute("set-as-prerequisite",{state:this.isPrerequisite})}}),a.createElement("label",{hidden:!1,htmlFor:"cb:prerequisite"+this.id},"Is prerequisite"),a.createElement("span",null),a.createElement("input",{hidden:!1,type:"checkbox",id:"cb:linked"+this.id,name:this.id,checked:this.isLinked,onChange:e=>{this.changeIsLinked(!this.isLinked),this.commands.execute("set-as-linked",{state:this.isLinked})}}),a.createElement("label",{hidden:!1,htmlFor:"cb:linked"+this.id},"Execute together with the previous cell"),a.createElement("br",null),a.createElement("button",{className:"iotcell-cellFooterBtn",disabled:"Arduino"==this.kernel&&0==this.isBoardConnected,hidden:1==this.isPrerequisite,onClick:e=>{this.isLinked?this.commands.execute("run-linked-selected-codecell",{board:this.fqbn+""}):this.commands.execute("run-selected-codecell",{board:this.fqbn+""})}},"run"))}}class L extends s.NotebookPanel.ContentFactory{constructor(e,t,n){super(n),this.commands=e,this._toolbar=t}createNotebook(e){return new q(e)}createCellFooter(){const e=new I(this.commands);return this._toolbar.stateChanged.connect(e._notifyBoardConnection,e),e}}class q extends s.Notebook{onActivateRequest(){var e=0;(0,d.each)(this.widgets,(t=>{const n=t.model;if("code"===n.type&&(null!=n.metadata.get(y)||null!=n.metadata.get(E))){const e=null!=n.metadata.get(y)&&1==n.metadata.get(y),s=null!=n.metadata.get(E)&&1==n.metadata.get(E),i=(0,d.toArray)(t.children())[3];i.changeIsPrerequisite(e),i.changeIsLinked(s)}"code"===n.type&&((0,d.toArray)(t.children())[3].id=e+""),e++}))}}var S;!function(e){e.executed=new C.Signal({}),e.getState=function(e){return{wasFocused:e.node.contains(document.activeElement),activeCell:e.activeCell}},e.handleState=function(e,t,n=!1){const{activeCell:s,node:i}=e;(t.wasFocused||"edit"===e.mode)&&e.activate(),n&&s&&_.ElementExt.scrollIntoViewIfNeeded(i,s.node)},e.handleRunState=function(e,t,n=!1){if((t.wasFocused||"edit"===e.mode)&&e.activate(),n&&t.activeCell){const n=t.activeCell.inputArea.node.getBoundingClientRect();e.scrollToPosition(n.bottom,45)}},e.runSelected=function(t,n){t.mode="command";let s=t.activeCellIndex;const i=t.widgets.filter(((e,n)=>{const i=t.isSelectedOrActive(e);return i&&(s=n),i}));return t.activeCellIndex=s,t.deselectAll(),Promise.all(i.map((s=>function(t,n,s,i){var o,a,r;const c=(i=i||x.nullTranslator).load("jupyterlab");switch(n.model.type){case"markdown":n.rendered=!0,n.inputHidden=!1,e.executed.emit({notebook:t,cell:n});break;case"code":if(s){if(s.isTerminating){(0,l.showDialog)({title:c.__("Kernel Terminating"),body:c.__("The kernel for %1 appears to be terminating. You can not run any cell for now.",null===(o=s.session)||void 0===o?void 0:o.path),buttons:[l.Dialog.okButton({label:c.__("Ok")})]});break}const i=null!=(r=null===(a=t.model)||void 0===a?void 0:a.deletedCells)?r:[];return f.CodeCell.execute(n,s,{deletedCells:i,recordTiming:t.notebookConfig.recordTiming}).then((e=>{if(i.splice(0,i.length),n.isDisposed)return!1;if(!e)return!0;if("ok"===e.content.status){const s=e.content;return s.payload&&s.payload.length&&function(e,t,n){var s;const i=null===(s=e.payload)||void 0===s?void 0:s.filter((e=>"set_next_input"===e.source))[0];if(!i)return;const o=i.text;if(i.replace)return void(n.model.value.text=o);const a=t.model.contentFactory.createCodeCell({}),r=t.model.cells,l=d.ArrayExt.firstIndexOf((0,d.toArray)(r),n.model);a.value.text=o,-1===l?r.push(a):r.insert(l+1,a)}(s,t,n),!0}throw new Error("KernelReplyNotOK")})).catch((e=>{if(n.isDisposed||e.message.startsWith("Canceled"))return!1;throw e})).then((s=>(s&&e.executed.emit({notebook:t,cell:n}),s)))}n.model.clearExecution()}return Promise.resolve(!0)}(t,s,n)))).then((e=>!t.isDisposed&&(t.update(),e.every((e=>e))))).catch((e=>{if("KernelReplyNotOK"!==e.message)throw e;return i.map((e=>{"code"===e.model.type&&null==e.model.executionCount&&e.setPrompt("")})),t.update(),!1}))}}(S||(S={}));var A=n(9129);new w.LabIcon({name:"defaultpkg:board",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0zm0 0h24v24H0V0z" fill="none"/><path d="M22 9V7h-2V3H2v18h18v-4h2v-2h-2v-2h2v-2h-2V9h2zm-4 10H4V5h14v14zM6 13h5v4H6v-4zm6-6h4v3h-4V7zM6 7h5v5H6V7zm6 4h4v6h-4v-6z" fill="#616161"/></svg>'});const N=new w.LabIcon({name:"defaultpkg:board-off",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24"><rect fill="none" height="24" width="24"/><path d="M7.83,5H18v10.17L19.83,17H22v-2h-2v-2h2v-2h-2V9h2V7h-2V3H5.83L7.83,5z M12,9.17V7h4v3h-3.17L12,9.17z M9.83,7H11v1.17 L9.83,7z M13.83,11H16v2.17L13.83,11z M18.17,21l2.31,2.31l1.41-1.41L2.1,2.1L0.69,3.51L2,4.83V21H18.17z M4,19V6.83l2,2V12h3.17 l1,1H6v4h5v-3.17l1,1V17h2.17l2,2H4z" fill="#616161"/></svg>'}),F="architectural_element";class T extends l.ReactWidget{constructor(e,t){super(),this.callback=()=>{if(this._kernelModel.execute("arduino-cli board list"),null!=this._kernelModel.boardList)return l.InputDialog.getItem({title:"Pick an Arduino Board",items:this._kernelModel.boardList}).then((e=>{this._fqbn=e.value.split("\t")[3],this._notebook.model.metadata.set("arduino_fqbn",e.value.split("\t")[0]),this._stateChanged.emit(e.value.split("\t")[0])}));{const e=[l.Dialog.okButton({label:"Ok"})];new l.Dialog({title:"Couldn't find an Arduino Board",buttons:e}).launch()}},this._stateChanged=new C.Signal(this),this._fqbn="Board",this.addClass("jp-Toolbar-kernelName"),this._onStatusChanged(e),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onStatusChanged,this),this._kernelModel=new D(e),this._notebook=t}_onStatusChanged(e){this._kernel=e.kernelDisplayName,this._stateChanged.emit("kernel"+this._kernel),this.update()}render(){return"Arduino"===this._kernel?r().createElement(r().Fragment,null,r().createElement(l.ToolbarButtonComponent,{onClick:this.callback,tooltip:"Connect to an Arduino board",label:this._fqbn}),r().createElement(N.react,{stylesheet:"toolbarButton",alignSelf:"normal",height:"24px"})):r().createElement(r().Fragment,null)}get stateChanged(){return this._stateChanged}}class M extends l.ReactWidget{constructor(e,t){super(),this.handleChange=e=>{"-"!==e.target.value&&(this._notebook.model.metadata.set(F,e.target.value),this.update(),this._notebook.activate())},this._trans=(t||x.nullTranslator).load("jupyterlab"),this.addClass("jp-Notebook-toolbarCellType"),this._notebook=e,e.stateChanged.connect(this.update,this)}render(){let e="-";return null!=this._notebook.model.metadata.get(F)&&(e=this._notebook.model.metadata.get(F).toString()),r().createElement(w.HTMLSelect,{className:"jp-Notebook-toolbarCellTypeDropdown",onChange:this.handleChange,value:e,"aria-label":this._trans.__("IoT Architectural Element")},r().createElement("option",{value:"-"},"-"),r().createElement("option",{value:"app-and-cloud"},this._trans.__("Application & Cloud Services")),r().createElement("option",{value:"device"},this._trans.__("Devices")),r().createElement("option",{value:"gateway"},this._trans.__("Gateway")))}}class D{constructor(e){this._onIOPub=e=>{switch(e.header.msg_type){case"stream":this._output=e.content;var t=this._output.text.toString().split("Name ")[1];""!=t&&(this._boardList=t.split("\n").filter((e=>""!==e)));case"execute_result":case"display_data":case"update_display_data":this._output=e.content,this._stateChanged.emit()}},this._future=null,this._output=null,this._stateChanged=new C.Signal(this),this._sessionContext=e}get future(){return this._future}set future(e){this._future=e,e&&(e.onIOPub=this._onIOPub)}get output(){return this._output}get stateChanged(){return this._stateChanged}get boardList(){return this._boardList}execute(e){var t,n,s;this._sessionContext&&(null===(t=this._sessionContext.session)||void 0===t?void 0:t.kernel)&&(this.future=null===(s=null===(n=this._sessionContext.session)||void 0===n?void 0:n.kernel)||void 0===s?void 0:s.requestExecute({code:e}))}}const B=new w.LabIcon({name:"defaultpkg:iot",svgstr:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\r\n\r\n<svg\r\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n   xmlns:cc="http://creativecommons.org/ns#"\r\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n   xmlns:svg="http://www.w3.org/2000/svg"\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r\n   sodipodi:docname="iot-plain.svg"\r\n   inkscape:version="0.92.4 (5da689c313, 2019-01-14)"\r\n   id="svg8"\r\n   version="1.1"\r\n   viewBox="0 0 6.3499999 6.3500002"\r\n   height="24"\r\n   width="24">\r\n  <defs\r\n     id="defs2" />\r\n  <sodipodi:namedview\r\n     id="base"\r\n     pagecolor="#ffffff"\r\n     bordercolor="#666666"\r\n     borderopacity="1.0"\r\n     inkscape:pageopacity="0.0"\r\n     inkscape:pageshadow="2"\r\n     inkscape:zoom="31.678384"\r\n     inkscape:cx="5.0871033"\r\n     inkscape:cy="9.448749"\r\n     inkscape:document-units="mm"\r\n     showgrid="false"\r\n     inkscape:window-width="1920"\r\n     inkscape:window-height="1017"\r\n     inkscape:window-x="-8"\r\n     inkscape:window-y="-8"\r\n     inkscape:window-maximized="1"\r\n     units="px" />\r\n  <metadata\r\n     id="metadata5">\r\n    <rdf:RDF>\r\n      <cc:Work\r\n         rdf:about="">\r\n        <dc:format>image/svg+xml</dc:format>\r\n        <dc:type\r\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\r\n        <dc:title />\r\n      </cc:Work>\r\n    </rdf:RDF>\r\n  </metadata>\r\n  <g\r\n     transform="translate(342.48855,-120.21372)">\r\n    <g\r\n       transform="translate(-0.4015997,1.937128)">\r\n      <path\r\n         id="path823"\r\n         style="fill:#616161;fill-opacity:1;stroke:none;stroke-width:0.03032123"\r\n         d="m -342.08695,119.97993 h 0.6312 v 2.93886 h -0.6312 z" />\r\n      <path\r\n         id="path825"\r\n         style="fill:#616161;fill-opacity:1;stroke:none;stroke-width:0.03032123"\r\n         d="m -340.96109,121.44824 q 0,-0.65134 0.42975,-1.07437 0.43199,-0.42527 1.02289,-0.42527 0.65358,0 1.08109,0.42751 0.42751,0.42527 0.42751,1.07661 0,0.64686 -0.42303,1.07437 -0.42304,0.42752 -1.06542,0.42752 -0.64239,0 -1.05871,-0.42528 -0.41408,-0.42527 -0.41408,-1.08109 z m 1.48174,-0.91322 q -0.36932,-0.007 -0.59538,0.25517 -0.22607,0.26188 -0.22607,0.67596 0,0.3917 0.23054,0.6491 0.23055,0.2574 0.58196,0.2574 0.36931,0 0.59538,-0.25292 0.2283,-0.25517 0.2283,-0.67149 0,-0.4096 -0.22382,-0.65805 -0.22159,-0.24845 -0.59091,-0.25517 z" />\r\n      <path\r\n         id="path827"\r\n         style="fill:#616161;fill-opacity:1;stroke:none;stroke-width:0.03032123"\r\n         d="m -337.71335,119.97993 h 1.9764 v 0.62448 h -0.67372 v 2.31438 h -0.63343 v -2.31438 h -0.66925 z" />\r\n    </g>\r\n  </g>\r\n</svg>\r\n'}),z=new w.LabIcon({name:"defaultpkg:iot-ae",svgstr:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\r\n<svg\r\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\r\n   xmlns:cc="http://creativecommons.org/ns#"\r\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\r\n   xmlns:svg="http://www.w3.org/2000/svg"\r\n   xmlns="http://www.w3.org/2000/svg"\r\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\r\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\r\n   width="16"\r\n   height="16"\r\n   version="1.1"\r\n   id="svg4"\r\n   sodipodi:docname="iot-ae.svg"\r\n   style="clip-rule:evenodd;fill-rule:evenodd"\r\n   inkscape:version="0.92.4 (5da689c313, 2019-01-14)">\r\n  <metadata\r\n     id="metadata10">\r\n    <rdf:RDF>\r\n      <cc:Work\r\n         rdf:about="">\r\n        <dc:format>image/svg+xml</dc:format>\r\n        <dc:type\r\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\r\n        <dc:title></dc:title>\r\n      </cc:Work>\r\n    </rdf:RDF>\r\n  </metadata>\r\n  <defs\r\n     id="defs8" />\r\n  <sodipodi:namedview\r\n     pagecolor="#ffffff"\r\n     bordercolor="#666666"\r\n     borderopacity="1"\r\n     objecttolerance="10"\r\n     gridtolerance="10"\r\n     guidetolerance="10"\r\n     inkscape:pageopacity="0"\r\n     inkscape:pageshadow="2"\r\n     inkscape:window-width="1920"\r\n     inkscape:window-height="1017"\r\n     id="namedview6"\r\n     showgrid="false"\r\n     inkscape:zoom="9.8333333"\r\n     inkscape:cx="-6.2033898"\r\n     inkscape:cy="12"\r\n     inkscape:window-x="-8"\r\n     inkscape:window-y="-8"\r\n     inkscape:window-maximized="1"\r\n     inkscape:current-layer="svg4" />\r\n  <path\r\n     d="M 0.66666667,8.103333 C 2.1706667,10.75 3.7,13.382 5.2526667,16 h -3.586 C 1.114,16 0.66666667,15.55 0.66666667,15 Z M 2.5666667,8.676 C 4.752,9.977333 11.144,13.781333 11.314,13.879333 L 7.8726667,15.866 C 7.7186667,15.954 7.546,16 7.372,16 7.006,16 6.6806667,15.801333 6.506,15.5 Z M 3.8333333,0.134 C 3.68,0.0453333 3.5073333,0 3.3333333,0 2.984,0 2.6493333,0.1846667 2.4673333,0.5 L 0.134,4.541333 C 0.04533333,4.694667 0,4.867333 0,5.040667 0,5.392 0.18533333,5.726 0.5,5.907333 c 1.9573333,1.13 9.72,5.8 11.677333,6.930667 C 12.656,13.113333 13.266,12.95 13.542667,12.471333 L 15.876,8.43 C 15.964667,8.276667 16,8.104667 16,7.930667 16,7.584 15.828667,7.247333 15.510667,7.064 L 3.8333333,0.134 M 4,2.763333 c 0.736,0 1.3333333,0.597334 1.3333333,1.333334 C 5.3333333,4.832667 4.736,5.43 4,5.43 3.264,5.43 2.6666667,4.832667 2.6666667,4.096667 2.6666667,3.360667 3.264,2.763333 4,2.763333"\r\n     id="path2"\r\n     inkscape:connector-curvature="0"\r\n     style="stroke-width:0.66666669;fill:#616161;fill-opacity:1" />\r\n</svg>\r\n'}),P=new class{constructor(){this._stateChanged=new C.Signal(this),this._kernelChanged=new C.Signal(this)}createNew(e){let t=new l.ToolbarButton({className:"myButton",label:"IoT Architectural Element"}),n=new M(e.content),s=new T(e.sessionContext,e.content);return s.stateChanged.connect(this._logMessage,this),e.toolbar.insertItem(11,"lblIoTAE",t),e.toolbar.insertAfter("lblIoTAE","switchIoTAE",n),e.toolbar.insertItem(15,"lblBoardConn",s),new A.DisposableDelegate((()=>{t.dispose()}))}_logMessage(e,t){this._stateChanged.emit(t)}get stateChanged(){return this._stateChanged}get kernelChanged(){return this._kernelChanged}},H=[{id:"iot-notebook:iotsidebar",requires:[i.IDocumentManager],autoStart:!0,activate:(e,t)=>{console.log("JupyterLab extension iot-notebook:iotsidebar is activated!");const n=new o.FileBrowserModel({manager:t}),s=new m(e,n);e.shell.add(s,"left",{rank:150})}},{id:"iot-notebook:factory",provides:s.NotebookPanel.IContentFactory,autoStart:!0,activate:e=>{console.log("JupyterLab extension iot-notebook:factory is activated!");const{commands:t}=e;return new L(t,P)}},{id:"iot-notebook:toolbar",autoStart:!0,activate:e=>{console.log("JupyterLab extension iot-notebook:toolbar is activated!"),e.docRegistry.addWidgetExtension("Notebook",P)}},{id:"iot-notebook:cellfooter",requires:[s.INotebookTracker],autoStart:!0,activate:function(e,t){return Promise.all([e.restored]).then((([n])=>{const{commands:i,shell:o}=e;function a(e){const n=t.currentWidget;return!1!==e.activate&&n&&o.activateById(n.id),n}function r(){return null!==t.currentWidget&&t.currentWidget===e.shell.currentWidget}i.addCommand("run-selected-codecell",{label:"Run Cell",execute:e=>{const t=a(e);if(t){const{context:a,content:d}=t,c=d.activeCellIndex;var n=d;n.model.readOnly=!1;for(var i=n.model.cells.get(c).value.text,o=n.model.cells.get(c).value.text,r=!1,l=c-1;l>=0;l--)"code"==n.model.cells.get(l).type&&(n.model.cells.get(l).metadata.get("is_prerequisite")?(i=n.model.cells.get(l).value.text+"\n"+i,n.model.cells.get(l).metadata.get("is_linked_previous_cell")&&(r=!0)):r&&(i=n.model.cells.get(l).value.text+"\n"+i,1!=n.model.cells.get(l).metadata.get("is_linked_previous_cell")&&(r=!1)));n.model.cells.get(c).value.text="undefined"!=e.board?e.board+"\n"+i:i,s.NotebookActions.run(d,a.sessionContext),d.model.cells.get(c).value.text=o,d.update()}},isEnabled:r}),i.addCommand("run-linked-selected-codecell",{label:"Run Linked Cell",execute:e=>{const t=a(e);if(t){const{context:e,content:a}=t,d=a.activeCellIndex;var n=a;n.model.readOnly=!1;for(var i="",o=n.model.cells.get(d).value.text,r=!1,l=d;l>=0;l--)"code"==n.model.cells.get(l).type&&(r?n.model.cells.get(l).metadata.get("is_prerequisite")&&(i=n.model.cells.get(l).value.text+"\n"+i,r=!1):(i=n.model.cells.get(l).value.text+"\n"+i,1!=n.model.cells.get(l).metadata.get("is_linked_previous_cell")&&(r=!0)));n.model.cells.get(d).value.text=i,s.NotebookActions.run(a,e.sessionContext),a.model.cells.get(d).value.text=o,a.update()}},isEnabled:r}),i.addCommand("set-as-prerequisite",{label:"Is prerequisite",execute:e=>{const t=a(e);if(t){const{content:n}=t;n.activeCell.model.metadata.set(y,e.state),n.update()}},isEnabled:r}),i.addCommand("set-as-linked",{label:"Is linked to previous cell",execute:e=>{const t=a(e);if(t){const{content:n}=t;n.activeCell.model.metadata.set(E,e.state),n.update()}},isEnabled:r})})),Promise.resolve()}}]}}]);